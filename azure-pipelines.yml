# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml
trigger:
- master
pool:
  name: ProjectPool
  
steps:
- task: NodeTool@0
  inputs:
    versionSpec: '14.x'
  displayName: "Install node version 14"
- task: Npm@1
  inputs:
    command: 'install'
    workingDir: '$(build.sourcesdirectory)'
  displayName: "Install npm"


- task: ArchiveFiles@2
  inputs:
    rootFolderOrFile: '$(build.sourcesdirectory)'
    includeRootFolder: true
    archiveType: 'zip'
    archiveFile: '$(Build.ArtifactStagingDirectory)/bootcamp.zip'
    replaceExistingArchive: true
  displayName: "Creating zip file and moving to Artifact directory frok source"
- task: UniversalPackages@0
  inputs:
    command: 'publish'
    publishDirectory: '$(Build.ArtifactStagingDirectory)'
    feedsToUsePublish: 'internal'
    vstsFeedPublish: '40a8d693-43e7-4d3c-b58e-d3cae2291e12/8fb93940-a502-4cf8-802c-4f057f7fd12a'
    vstsFeedPackagePublish: 'bootcamp-app'
    versionOption: 'patch'
  displayName: "Move to artifact directory in dev.azure"